(function(b,k,h,e,a,p,t){b.extend(tribe_ev.fn,{set_form:function(a){var h=!1,k=b("body"),m=b("#tribe_events_filters_form"),g=b("#tribe-bar-form");k.addClass("tribe-reset-on");m.length&&(m.tribe_clear_form(),m.find(".ui-slider").length&&(h=!0,b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.prev(),f=a.slider("option");a.slider("values",0,f.min);a.slider("values",1,f.max);d.text(f.min+" - "+f.max);c.val("")})));g.length&&g.tribe_clear_form();
a=e.parse_string(a);b.each(a,function(a,c){if("action"!==a){var d=decodeURI(a),f="";if(1===c.length)b('[name="'+d+'"]').is('input[type="text"], input[type="hidden"]')?b('[name="'+d+'"]').val(c):b('[name="'+d+'"][value="'+c+'"]').is(":checkbox, :radio")?b('[name="'+d+'"][value="'+c+'"]').prop("checked",!0):b('[name="'+d+'"]').is("select")&&b('select[name="'+d+'"] option[value="'+c+'"]').attr("selected",!0);else for(var e=0;e<c.length;e++)f=b('[name="'+d+'"][value="'+c[e]+'"]'),f.is(":checkbox, :radio")?
f.prop("checked",!0):b('select[name="'+d+'"] option[value="'+c[e]+'"]').attr("selected",!0)}});h&&b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.val().split("-");""!==d[0]&&(c=c.prev(),a.slider("values",0,d[0]),a.slider("values",1,d[1]),c.text(d[0]+" - "+d[1]),a.slider("refresh"))});k.removeClass("tribe-reset-on")}});b(document).ready(function(){function n(b){if(b||"filters"===a.ajax_trigger&&k.v_width<k.mobile_break)d.addClass("tribe-filters-closed").removeClass("tribe-filters-open"),
tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","closed"),a.ajax_trigger=""}function r(){d.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open");tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}function s(){k.v_width<k.mobile_break&&n(!0)}function m(){if("past"===a.view||"list"===a.view||"photo"===a.view||"map"===a.view){if(a.paged=1,("past"===a.view||"list"===a.view)&&a.filter_cats)k.cur_url=b("#tribe-events-header").attr("data-baseurl")}else if("month"===
a.view)a.date=b("#tribe-events-header").attr("data-date"),k.cur_url=a.filter_cats?b("#tribe-events-header").attr("data-baseurl"):e.url_path(document.URL);else if("week"===a.view||"day"===a.view)a.date=b("#tribe-events-header").attr("data-date")}b(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var g=b("#tribe_events_filters_form"),l=b(".tribe-events-filters-horizontal"),c=b("#tribe-events"),d=b("body"),f=c.length&&c.tribe_has_attr("data-hover-filters")&&1===c.data("hover-filters")?
!0:!1;b("#tribe_events_filter_item_eventcategory").length&&a.category&&(a.filter_cats=!0);tribe_storage&&(c=tribe_storage.getItem("tribe_events_filters_wrapper"),null==c&&d.is(".tribe-filters-closed")&&(c="closed"),c&&"closed"==c?n(!0):c&&"open"==c&&r(),b(".tribe_events_filter_item").each(function(){var a=b(this),c=a.attr("id");(c=tribe_storage.getItem(c))&&"closed"==c&&a.addClass("closed")}));b("#tribe_events_filters_wrapper").on("click","#tribe_events_filters_reset",function(a){a.preventDefault();
d.addClass("tribe-reset-on");g.tribe_clear_form();g.find(".ui-slider").length&&b("#tribe_events_filters_form .ui-slider").each(function(){var a=b(this).attr("id"),a=b("#"+a),c=a.prev(),d=c.prev(),e=a.slider("option");a.slider("values",0,e.min);a.slider("values",1,e.max);d.text(e.min+" - "+e.max);c.val("")});l.length&&b(".tribe_events_filter_item").addClass("closed");g.submit();d.removeClass("tribe-reset-on")}).on("click","#tribe_events_filters_toggle",function(a){a.preventDefault();d.is(".tribe-filters-closed")?
r():n(!0)});d.on("click",function(){l.length&&!f&&b(".tribe_events_filter_item").addClass("closed")}).on("click",".tribe-events-filter-group",function(a){l.length&&!f&&a.stopPropagation()});if(f)g.on("mouseover",".tribe_events_filter_item",function(){l.length&&b(this).removeClass("closed")}).on("mouseout",".tribe_events_filter_item",function(){l.length&&b(".tribe_events_filter_item").addClass("closed")});g.on("click","h3",function(a){if(!l.length||!f){var c=b(this).parent(),d=c.attr("id");l.length&&
(a.stopPropagation(),b(".tribe_events_filter_item").not(c).addClass("closed"));c.hasClass("closed")?(c.removeClass("closed"),tribe_storage&&tribe_storage.setItem(d,"open")):(c.addClass("closed"),tribe_storage&&tribe_storage.setItem(d,"closed"))}});s();b(h).on("tribe_ev_ajaxSuccess",function(){n(!1)}).on("tribe_ev_resizeComplete",s);g.on("submit",function(c){"change_view"!==tribe_events_bar_action&&(c.preventDefault(),a.popping=!1,m(),e.pre_ajax(function(){b(h).trigger("tribe_ev_runAjax");a.ajax_trigger=
"filters"}))});if(p.live_ajax()&&p.pushstate){g.find('input[type="submit"]').remove();var q=function(){e.disable_inputs("#tribe_events_filters_form","input, select");a.popping=!1;m();"map"===a.view?p.pushstate?e.pre_ajax(function(){b(h).trigger("tribe_ev_runAjax");a.ajax_trigger="filters"}):e.pre_ajax(function(){b(h).trigger("tribe_ev_reloadOldBrowser")}):e.pre_ajax(function(){b(h).trigger("tribe_ev_runAjax");a.ajax_trigger="filters"})};if(b("#tribe_events_filter_item_eventcategory").length&&a.category)b("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",
function(){e.setup_ajax_timer(function(){q()})});g.on("slidechange",".ui-slider",function(){e.setup_ajax_timer(function(){q()})}).on("change","input, select",function(){a.filter_cats&&"tribe_events_filter_item_eventcategory"===b(this).parents(".tribe_events_filter_item").attr("id")||e.setup_ajax_timer(function(){q()})})}b(h).on("tribe_ev_collectParams",function(){var b=e.serialize("#tribe_events_filters_form","input, select");b.length?(a.filters=!0,a.params=a.params+"&"+b,"map"!==a.view&&(a.url_params=
a.url_params.length?a.url_params+"&"+b:b)):a.filters=!1});b(h).on("tribe_ev_postCollectBarParams",function(){a.filter_cats&&b("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var c=e.serialize("#tribe_events_filters_form","input, select");a.url_params.length&&c.length?a.url_params=a.url_params+"&"+c:c.length&&(a.url_params=c)});b("#tribe_events_filter_item_eventcategory").length&&a.category&&(d.addClass("tribe-reset-on"),b('#tribe_events_filter_item_eventcategory option[data-slug="'+
a.category+'"]').attr("selected",!0),b('#tribe_events_filter_item_eventcategory input[data-slug="'+a.category+'"]').attr("checked","checked"),d.removeClass("tribe-reset-on"));t&&debug.info("filter-scripts.js successfully loaded")})})(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);
